<div class="main-content">
  <h1>Create a New Background</h1>
  <form [formGroup]="backgroundForm" (ngSubmit)="onSubmit()">
    <!-- Background Name and Description -->
    <div class="form-group">
      <label for="name">Background Name:</label>
      <input type="text" id="name" formControlName="name" placeholder="Enter background name" required>
    </div>
    <div class="form-group">
      <label for="description">Description:</label>
      <textarea id="description" formControlName="description" placeholder="Enter background description" rows="4" required></textarea>
    </div>

    <!-- Skill Proficiencies -->
    <div class="form-group">
      <label>Skill Proficiencies:</label>
      <div class="dropdown-container">
        <select #skillSelect>
          <option *ngFor="let skill of skillProficiencies" [value]="skill">{{ skill }}</option>
        </select>
        <button type="button" (click)="addProficiency('skill', skillSelect.value)">Add</button>
      </div>
      <ul>
        <li *ngFor="let skill of skillProficienciesArray.controls">{{ skill.value }}</li>
      </ul>
    </div>

    <!-- Tool Proficiencies -->
    <div class="form-group">
      <label>Tool Proficiencies:</label>
      <div class="dropdown-container">
        <select #toolSelect>
          <option *ngFor="let tool of toolProficiencies" [value]="tool">{{ tool }}</option>
        </select>
        <button type="button" (click)="addProficiency('tool', toolSelect.value)">Add</button>
      </div>
      <ul>
        <li *ngFor="let tool of toolProficienciesArray.controls">{{ tool.value }}</li>
      </ul>
    </div>

    <!-- Language Proficiencies -->
    <div class="form-group">
      <label>Language Proficiencies:</label>
      <div class="dropdown-container">
        <select #languageSelect>
          <option *ngFor="let language of languageProficiencies" [value]="language">{{ language }}</option>
        </select>
        <button type="button" (click)="addProficiency('language', languageSelect.value)">Add</button>
      </div>
      <ul>
        <li *ngFor="let language of languageProficienciesArray.controls">{{ language.value }}</li>
      </ul>
    </div>

    <!-- Equipment -->
    <div class="form-group">
      <label>Equipment:</label>
      <div class="dropdown-container">
        <input type="text" #equipmentInput placeholder="Enter equipment">
        <button type="button" (click)="addEquipment(equipmentInput.value); equipmentInput.value=''">Add</button>
      </div>
      <ul>
        <li *ngFor="let item of equipmentArray.controls">{{ item.value }}</li>
      </ul>
    </div>

    <!-- Feature Name and Description -->
    <div class="form-group">
      <label for="feature_name">Feature Name:</label>
      <input type="text" id="feature_name" formControlName="featureName" placeholder="Enter feature name" required>
    </div>
    <div class="form-group">
      <label for="feature_description">Feature Description:</label>
      <textarea id="feature_description" formControlName="featureDescription" placeholder="Enter feature description" rows="4" required></textarea>
    </div>

    <!-- Suggested Characteristics -->
    <div class="form-group">
      <label>Suggested Characteristics:</label>

      <!-- Personality Traits -->
  <table>
      <thead>
        <tr>
          <th>Personality Traits (d8)</th>
        </tr>
      </thead>
      <tbody formArrayName="personalityTraits">
        <tr *ngFor="let trait of personalityTraitsArray.controls; let i = index">
          <td>
            <input type="text" [formControlName]="i" placeholder="Trait {{ i + 1 }}">
          </td>
        </tr>
      </tbody>
    </table>
    
    <!-- Ideals -->
    <table>
      <thead>
        <tr>
          <th>Ideals (d6)</th>
        </tr>
      </thead>
      <tbody formArrayName="ideals">
        <tr *ngFor="let ideal of idealsArray.controls; let i = index">
          <td>
            <input type="text" [formControlName]="i" placeholder="Ideal {{ i + 1 }}">
          </td>
        </tr>
      </tbody>
    </table>
    
    <!-- Bonds -->
    <table>
      <thead>
        <tr>
          <th>Bonds (d6)</th>
        </tr>
      </thead>
      <tbody formArrayName="bonds">
        <tr *ngFor="let bond of bondsArray.controls; let i = index">
          <td>
            <input type="text" [formControlName]="i" placeholder="Bond {{ i + 1 }}">
          </td>
        </tr>
      </tbody>
    </table>
    
    <!-- Flaws -->
    <table>
      <thead>
        <tr>
          <th>Flaws (d6)</th>
        </tr>
      </thead>
      <tbody formArrayName="flaws">
        <tr *ngFor="let flaw of flawsArray.controls; let i = index">
          <td>
            <input type="text" [formControlName]="i" placeholder="Flaw {{ i + 1 }}">
          </td>
        </tr>
      </tbody>
    </table>

  <button type="submit">Save Background</button>
</div>